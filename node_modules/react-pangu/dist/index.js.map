{"version":3,"file":"index.js","sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../src/lib/components/QiniuAntd/QiniuAntd.js"],"sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Upload, Button, Icon, Spin,\n} from 'antd'\n\nconst uploadProps = {\n  action: 'https://upload.qiniup.com/',\n  name: 'file',\n}\n\nconst QiniuAntd = ({\n  token, onSuccess, keyPrefix, keyFunc,\n}) => {\n  const [uploading, setUploading] = useState(false)\n  const [filename, setFilename] = useState('')\n\n  const handleAvatarChange = ({ file }) => {\n    if (file.status === 'uploading') {\n      setUploading(true)\n\n      return\n    }\n    if (file.status === 'done') {\n      setUploading(false)\n      const {\n        response: { key },\n      } = file\n      onSuccess(key)\n    }\n  }\n\n  return (\n    <Upload\n      {...uploadProps}\n      accept=\"image/*\"\n      showUploadList={false}\n      beforeUpload={file => setFilename(file.name)}\n      data={{ token, key: keyFunc(keyPrefix, filename) }}\n      onChange={handleAvatarChange}\n    >\n      <Button>\n        {uploading ? <Spin indicator={<Icon type=\"loading\" style={{ fontSize: 18 }} spin />} /> : <Icon type=\"upload\" />}\n        <span style={{ marginLeft: 4 }}>Upload</span>\n      </Button>\n    </Upload>\n  )\n}\n\nQiniuAntd.propTypes = {\n  token: PropTypes.string.isRequired,\n  /** Function called when uploading is dong */\n  onSuccess: PropTypes.func.isRequired,\n  /** Prefix for key of uploaded file */\n  keyPrefix: PropTypes.isRequired,\n  /** Function called for generating key */\n  keyFunc: PropTypes.func,\n}\n\nQiniuAntd.defaultProps = {\n  keyFunc: (keyPrefix, filename) => (keyPrefix ? `${keyPrefix}-${new Date().getTime()}-${filename}` : `${new Date().getTime()}-${filename}`),\n}\n\nexport default QiniuAntd\n"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","nonIterableRest","uploadProps","action","name","QiniuAntd","token","onSuccess","keyPrefix","keyFunc","useState","uploading","setUploading","filename","setFilename","React","Upload","accept","showUploadList","beforeUpload","file","data","key","onChange","status","response","Button","Spin","indicator","Icon","type","style","fontSize","spin","marginLeft","defaultProps","Date","getTime"],"mappings":"8OAAe,SAASA,gBAAgBC,GACtC,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,ECDlB,SAASG,sBAAsBH,EAAKI,GACjD,GAAMC,OAAOC,YAAYC,OAAOP,IAAgD,uBAAxCO,OAAOC,UAAUC,SAASC,KAAKV,GAAvE,CAIA,IAAIW,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKC,EAET,IACE,IAAK,IAAiCC,EAA7BC,EAAKjB,EAAIK,OAAOC,cAAmBM,GAAMI,EAAKC,EAAGC,QAAQC,QAChER,EAAKS,KAAKJ,EAAGK,QAETjB,GAAKO,EAAKW,SAAWlB,GAH8CQ,GAAK,IAK9E,MAAOW,GACPV,GAAK,EACLC,EAAKS,UAEL,IACOX,GAAsB,MAAhBK,EAAW,QAAWA,EAAW,iBAE5C,GAAIJ,EAAI,MAAMC,GAIlB,OAAOH,YC3Bea,mBACtB,MAAM,IAAIC,UAAU,wDCEP,SAASC,eAAe1B,EAAKI,GAC1C,OAAOuB,gBAAe3B,IAAQ4B,sBAAqB5B,EAAKI,IAAMyB,uBCE1DC,YAAc,CAClBC,OAAQ,6BACRC,KAAM,QAGFC,UAAY,gBAChBC,IAAAA,MAAOC,IAAAA,UAAWC,IAAAA,UAAWC,IAAAA,yBAEKC,gBAAS,MAApCC,OAAWC,wBACcF,eAAS,OAAlCG,OAAUC,cAkBfC,6BAACC,6BACKd,aACJe,OAAO,UACPC,gBAAgB,EAChBC,aAAc,SAAAC,UAAQN,EAAYM,EAAKhB,OACvCiB,KAAM,CAAEf,MAAAA,EAAOgB,IAAKb,EAAQD,EAAWK,IACvCU,SAtBuB,gBAAGH,IAAAA,QACR,cAAhBA,EAAKI,WAKW,SAAhBJ,EAAKI,OAAmB,CAC1BZ,GAAa,OAECU,EACVF,EADFK,SAAYH,IAEdf,EAAUe,SATVV,GAAa,MAsBbG,6BAACW,iBACEf,EAAYI,6BAACY,WAAKC,UAAWb,6BAACc,WAAKC,KAAK,UAAUC,MAAO,CAAEC,SAAU,IAAMC,YAAclB,6BAACc,WAAKC,KAAK,WACrGf,qCAAMgB,MAAO,CAAEG,WAAY,iBAgBnC7B,UAAU8B,aAAe,CACvB1B,QAAS,SAACD,EAAWK,UAAcL,YAAeA,eAAa,IAAI4B,MAAOC,sBAAaxB,cAAgB,IAAIuB,MAAOC,sBAAaxB"}