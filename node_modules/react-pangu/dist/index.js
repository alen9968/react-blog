"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),antd=require("antd");function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}var uploadProps={action:"https://upload.qiniup.com/",name:"file"},QiniuAntd=function(e){var t=e.token,a=e.onSuccess,n=e.keyPrefix,r=e.keyFunc,o=_slicedToArray(React.useState(!1),2),i=o[0],c=o[1],l=_slicedToArray(React.useState(""),2),u=l[0],d=l[1];return React__default.createElement(antd.Upload,Object.assign({},uploadProps,{accept:"image/*",showUploadList:!1,beforeUpload:function(e){return d(e.name)},data:{token:t,key:r(n,u)},onChange:function(e){var t=e.file;if("uploading"!==t.status){if("done"===t.status){c(!1);var n=t.response.key;a(n)}}else c(!0)}}),React__default.createElement(antd.Button,null,i?React__default.createElement(antd.Spin,{indicator:React__default.createElement(antd.Icon,{type:"loading",style:{fontSize:18},spin:!0})}):React__default.createElement(antd.Icon,{type:"upload"}),React__default.createElement("span",{style:{marginLeft:4}},"Upload")))};QiniuAntd.defaultProps={keyFunc:function(e,t){return e?"".concat(e,"-").concat((new Date).getTime(),"-").concat(t):"".concat((new Date).getTime(),"-").concat(t)}},exports.QiniuAntd=QiniuAntd;
//# sourceMappingURL=index.js.map
