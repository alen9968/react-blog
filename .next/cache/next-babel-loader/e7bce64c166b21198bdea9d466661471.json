{"ast":null,"code":"import _Array$isArray from \"@babel/runtime-corejs2/core-js/array/is-array\";\nimport I, { List, Set, isImmutable } from 'immutable';\nimport _ from 'lodash';\nimport request from '../../utils/request';\nexport const VIEW_SET = 'VIEW_SET';\nexport const VIEW_SET_IN = 'VIEW_SET_IN';\nexport const VIEW_MERGE_IN = 'VIEW_MERGE_IN';\nexport const VIEW_DELETE_IN = 'VIEW_DELETE_IN';\nexport const VIEW_TOGGLE_IN = 'VIEW_TOGGLE_IN';\nexport const ADD_REQUESTING_IDS = 'ADD_REQUESTING_IDS';\nexport const DEL_REQUESTING_IDS = 'DEL_REQUESTING_IDS';\nconst HttpState = {\n  UNKNOWN: 'UNKNOWN',\n  REQUESTING: 'REQUESTING',\n  REQUESTED: 'REQUESTED'\n};\nconst initialState = I.fromJS({\n  chatHistory: {},\n  signupDialogOpen: false,\n  loader: {\n    show: false,\n    text: null\n  },\n  self: {},\n  loginState: {\n    state: HttpState.UNKNOWN,\n    result: {} // 'ok, 'user_type'\n\n  },\n  login: {\n    emailOrMobileOrUsername: 'test@test.com',\n    password: '123aaa',\n    code: '',\n    mobile: '',\n    mobileCountryCode: '+86',\n    method: 'password'\n  },\n  apiRoot: request.API_ROOT\n});\nexport default function (aView = initialState, action) {\n  const {\n    table\n  } = action;\n  let {\n    value,\n    path\n  } = action;\n\n  if (!isImmutable(value)) {\n    value = I.fromJS(value);\n  }\n\n  let view;\n\n  if (!isImmutable(aView)) {\n    view = I.fromJS(aView);\n  } else {\n    view = aView;\n  }\n\n  if (!_Array$isArray(action.path)) {\n    path = [path];\n  }\n\n  switch (action.type) {\n    case VIEW_SET:\n      return value;\n\n    case VIEW_SET_IN:\n      return view.setIn(path, value);\n\n    case VIEW_MERGE_IN:\n      return view.mergeIn(path, value);\n\n    case VIEW_DELETE_IN:\n      return view.deleteIn(path, value);\n\n    case VIEW_TOGGLE_IN:\n      return view.updateIn(path, v => !v);\n\n    case ADD_REQUESTING_IDS:\n      return view.updateIn(['tables', table, 'requestingIds'], requestingIds => requestingIds.union(value));\n\n    case DEL_REQUESTING_IDS:\n      return view.updateIn(['tables', table, 'requestingIds'], requestingIds => requestingIds.subtract(value));\n\n    default:\n      return view;\n  }\n}\nexport const viewSet = value => ({\n  type: VIEW_SET,\n  value\n});\nexport const viewSetIn = (path, value) => ({\n  type: VIEW_SET_IN,\n  path,\n  value\n});\nexport const viewMergeIn = (path, value) => ({\n  type: VIEW_MERGE_IN,\n  path,\n  value\n});\nexport const viewDeleteIn = (path, value) => ({\n  type: VIEW_DELETE_IN,\n  path,\n  value\n});\nexport const viewToggleIn = path => ({\n  type: VIEW_TOGGLE_IN,\n  path\n});\nexport const setFetching = (table, fetching) => ({\n  type: VIEW_SET_IN,\n  path: ['tables', table, 'fetching'],\n  value: fetching\n});\nexport const getFetching = table => (D, S) => S().view.getIn(['tables', table, 'fetching']);\nexport const addRequestingIds = (table, value) => ({\n  type: ADD_REQUESTING_IDS,\n  table,\n  value\n});\nexport const delRequestingIds = (table, value) => ({\n  type: DEL_REQUESTING_IDS,\n  table,\n  value\n});\nexport const setSearchText = (table, searchText) => (D, S) => {\n  D(viewSet(S().view.setIn(['tables', table, 'searchText'], searchText)));\n};\nexport const setAllChecked = tableName => (D, S) => {\n  const state = S();\n  D(viewSet(state.view.updateIn(['tables', tableName], table => {\n    const allChecked = !table.get('allChecked');\n    return table.set('allChecked', allChecked).set('checked', allChecked ? state[tableName].map(item => item.get('id')).toSet() : Set());\n  })));\n};\nexport const setFilterOfTable = (table, path = ['tables', table, 'filter']) => newFilter => (D, S) => {\n  const oldFilter = S().view.getIn(path);\n  const filterString = _.isFunction(newFilter) ? newFilter.toString() : '';\n  const oldFilterString = _.isFunction(oldFilter) ? oldFilter.toString() : '';\n  D(viewSetIn(path, oldFilterString === filterString ? () => true : newFilter));\n};\nexport const selectPaymentGood = good => D => {\n  D(viewSetIn(['payment', 'goodId'], good.get('id')));\n};\nexport const unionPendingSsconfigs = ssconfigs => (D, S) => {\n  const ssconfigIds = ssconfigs.map(s => `${s.get('id')}:${s.get('server_port')}`);\n  const ssconfigIdsSet = S().view.get('pendingSsconfigs').union(ssconfigIds);\n  D(viewSetIn(['pendingSsconfigs'], ssconfigIdsSet));\n};\nexport const subtractPendingSsconfigs = ssconfigs => (D, S) => {\n  const ssconfigIds = ssconfigs.map(s => `${s.id}:${s.port}`);\n  const ssconfigIdsSet = S().view.get('pendingSsconfigs').subtract(ssconfigIds);\n  D(viewSetIn(['pendingSsconfigs'], ssconfigIdsSet));\n};\nexport const setLoggedIn = result => D => D(viewSetIn(['loginState', 'result'], result));\nexport const getLoginState = view => {\n  const state = view.getIn(['loginState', 'state', 'ok']); // if (state === HttpState.REQUESTED) {\n  //   return view.getIn(['loginState', 'result', 'ok'])\n  // }\n\n  return state;\n};","map":{"version":3,"sources":["/Users/zhangxuecai/Projects/react-blog/redux/modules/view.js"],"names":["I","List","Set","isImmutable","_","request","VIEW_SET","VIEW_SET_IN","VIEW_MERGE_IN","VIEW_DELETE_IN","VIEW_TOGGLE_IN","ADD_REQUESTING_IDS","DEL_REQUESTING_IDS","HttpState","UNKNOWN","REQUESTING","REQUESTED","initialState","fromJS","chatHistory","signupDialogOpen","loader","show","text","self","loginState","state","result","login","emailOrMobileOrUsername","password","code","mobile","mobileCountryCode","method","apiRoot","API_ROOT","aView","action","table","value","path","view","type","setIn","mergeIn","deleteIn","updateIn","v","requestingIds","union","subtract","viewSet","viewSetIn","viewMergeIn","viewDeleteIn","viewToggleIn","setFetching","fetching","getFetching","D","S","getIn","addRequestingIds","delRequestingIds","setSearchText","searchText","setAllChecked","tableName","allChecked","get","set","map","item","toSet","setFilterOfTable","newFilter","oldFilter","filterString","isFunction","toString","oldFilterString","selectPaymentGood","good","unionPendingSsconfigs","ssconfigs","ssconfigIds","s","ssconfigIdsSet","subtractPendingSsconfigs","id","port","setLoggedIn","getLoginState"],"mappings":"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","sourcesContent":["import I, { List, Set, isImmutable } from 'immutable' \nimport _ from 'lodash'\nimport request from '../../utils/request'\n\nexport const VIEW_SET = 'VIEW_SET'\nexport const VIEW_SET_IN = 'VIEW_SET_IN'\nexport const VIEW_MERGE_IN = 'VIEW_MERGE_IN'\nexport const VIEW_DELETE_IN = 'VIEW_DELETE_IN'\nexport const VIEW_TOGGLE_IN = 'VIEW_TOGGLE_IN'\nexport const ADD_REQUESTING_IDS = 'ADD_REQUESTING_IDS'\nexport const DEL_REQUESTING_IDS = 'DEL_REQUESTING_IDS'\n\nconst HttpState = {\n  UNKNOWN: 'UNKNOWN',\n  REQUESTING: 'REQUESTING',\n  REQUESTED: 'REQUESTED'\n}\n\nconst initialState = I.fromJS({\n  chatHistory: {},\n  signupDialogOpen: false,\n  loader: {\n    show: false,\n    text: null\n  },\n  self: {},\n  loginState: {\n    state: HttpState.UNKNOWN,\n    result: {} // 'ok, 'user_type'\n  },\n  login: {\n    emailOrMobileOrUsername: 'test@test.com',\n    password: '123aaa',\n    code: '',\n    mobile: '',\n    mobileCountryCode: '+86',\n    method: 'password'\n  },\n  apiRoot: request.API_ROOT\n})\nexport default function(aView = initialState, action) {\n  const { table } = action\n  let { value, path } = action\n  if (!isImmutable(value)) {\n    value = I.fromJS(value)\n  }\n  let view\n  if (!isImmutable(aView)) {\n    view = I.fromJS(aView)\n  } else {\n    view = aView\n  }\n  if (!Array.isArray(action.path)) {\n    path = [path]\n  }\n  switch (action.type) {\n    case VIEW_SET:\n      return value\n    case VIEW_SET_IN:\n      return view.setIn(path, value)\n    case VIEW_MERGE_IN:\n      return view.mergeIn(path, value)\n    case VIEW_DELETE_IN:\n      return view.deleteIn(path, value)\n    case VIEW_TOGGLE_IN:\n      return view.updateIn(path, v => !v)\n    case ADD_REQUESTING_IDS:\n      return view.updateIn(['tables', table, 'requestingIds'], requestingIds => requestingIds.union(value))\n    case DEL_REQUESTING_IDS:\n      return view.updateIn(['tables', table, 'requestingIds'], requestingIds => requestingIds.subtract(value))\n\n    default:\n      return view\n  }\n}\n\nexport const viewSet = value => ({ type: VIEW_SET, value })\nexport const viewSetIn = (path, value) => ({ type: VIEW_SET_IN, path, value })\nexport const viewMergeIn = (path, value) => ({ type: VIEW_MERGE_IN, path, value })\nexport const viewDeleteIn = (path, value) => ({ type: VIEW_DELETE_IN, path, value })\n\n\nexport const viewToggleIn = path => ({ type: VIEW_TOGGLE_IN, path })\nexport const setFetching = (table, fetching) => ({\n  type: VIEW_SET_IN,\n  path: ['tables', table, 'fetching'],\n  value: fetching\n})\nexport const getFetching = table => (D, S) => S().view.getIn(['tables', table, 'fetching'])\nexport const addRequestingIds = (table, value) => ({\n  type: ADD_REQUESTING_IDS,\n  table,\n  value\n})\nexport const delRequestingIds = (table, value) => ({\n  type: DEL_REQUESTING_IDS,\n  table,\n  value\n})\n\nexport const setSearchText = (table, searchText) => (D, S) => {\n  D(viewSet(S().view.setIn(['tables', table, 'searchText'], searchText)))\n}\n\nexport const setAllChecked = tableName => (D, S) => {\n  const state = S()\n  D(\n    viewSet(\n      state.view.updateIn(['tables', tableName], table => {\n        const allChecked = !table.get('allChecked')\n        return table.set('allChecked', allChecked).set('checked', allChecked ? state[tableName].map(item => item.get('id')).toSet() : Set())\n      })\n    )\n  )\n}\n\nexport const setFilterOfTable = (table, path = ['tables', table, 'filter']) => newFilter => (D, S) => {\n  const oldFilter = S().view.getIn(path)\n  const filterString = _.isFunction(newFilter) ? newFilter.toString() : ''\n  const oldFilterString = _.isFunction(oldFilter) ? oldFilter.toString() : ''\n  D(viewSetIn(path, oldFilterString === filterString ? () => true : newFilter))\n}\n\nexport const selectPaymentGood = good => D => {\n  D(viewSetIn(['payment', 'goodId'], good.get('id')))\n}\n\nexport const unionPendingSsconfigs = ssconfigs => (D, S) => {\n  const ssconfigIds = ssconfigs.map(s => `${s.get('id')}:${s.get('server_port')}`)\n  const ssconfigIdsSet = S()\n    .view.get('pendingSsconfigs')\n    .union(ssconfigIds)\n  D(viewSetIn(['pendingSsconfigs'], ssconfigIdsSet))\n}\n\nexport const subtractPendingSsconfigs = ssconfigs => (D, S) => {\n  const ssconfigIds = ssconfigs.map(s => `${s.id}:${s.port}`)\n  const ssconfigIdsSet = S()\n    .view.get('pendingSsconfigs')\n    .subtract(ssconfigIds)\n  D(viewSetIn(['pendingSsconfigs'], ssconfigIdsSet))\n}\n\nexport const setLoggedIn = result => D => D(viewSetIn(['loginState', 'result'], result))\n\nexport const getLoginState = view => {\n  const state = view.getIn(['loginState', 'state', 'ok'])\n  // if (state === HttpState.REQUESTED) {\n  //   return view.getIn(['loginState', 'result', 'ok'])\n  // }\n  return state\n}\n"]},"metadata":{},"sourceType":"module"}