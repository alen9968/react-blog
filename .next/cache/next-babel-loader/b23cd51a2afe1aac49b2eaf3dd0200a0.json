{"ast":null,"code":"import request from '../utils/request';\nimport _ from 'lodash';\nimport I from 'immutable';\nimport { articlesSet, articlesSetIn } from '../redux/modules/articles';\nexport var getArticles = function getArticles() {\n  return function (D) {\n    return request.get('articles').then(function (body) {\n      var data = body.data,\n          ok = body.ok;\n      console.info(body);\n\n      if (ok) {\n        D(articlesSet(I.fromJS(_.keyBy(data || [], 'id')))); //articles.map(v => v.set('key', v.get('id')))\n      }\n\n      return ok;\n    })[\"catch\"](function (e) {\n      return console.info(e);\n    });\n  };\n};\nexport var createArticle = function createArticle(title, content, img) {\n  return function (D) {\n    return request.post('articles', {\n      title: title,\n      content: content,\n      img: img\n    }).then(function (body) {\n      var ok = body.ok;\n\n      if (ok) {\n        return ok;\n      }\n    });\n  };\n}; // export const deleteArticle = (id) => D =>\n//   request\n//     .delete(`articles/${id}`)\n//     .then(res => res.json())\n//     .then(body => {\n//       const { ok } = body\n//       console.info(body)\n//       if (ok) {\n//         return ok\n//       }\n//     })\n//     .catch(e => console.info(e,'Delete faild'))","map":{"version":3,"sources":["/Users/zhangxuecai/Projects/react-blog/http/article.js"],"names":["request","_","I","articlesSet","articlesSetIn","getArticles","D","get","then","body","data","ok","console","info","fromJS","keyBy","e","createArticle","title","content","img","post"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,kBAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,CAAP,MAAc,WAAd;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,2BAA3C;AAGA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAM,UAAAC,CAAC;AAAA,WAChCN,OAAO,CACJO,GADH,CACO,UADP,EAEGC,IAFH,CAEQ,UAAAC,IAAI,EAAI;AAAA,UACJC,IADI,GACSD,IADT,CACJC,IADI;AAAA,UACEC,EADF,GACSF,IADT,CACEE,EADF;AAEZC,MAAAA,OAAO,CAACC,IAAR,CAAaJ,IAAb;;AACA,UAAIE,EAAJ,EAAQ;AACNL,QAAAA,CAAC,CAACH,WAAW,CAACD,CAAC,CAACY,MAAF,CAASb,CAAC,CAACc,KAAF,CAAQL,IAAI,IAAI,EAAhB,EAAoB,IAApB,CAAT,CAAD,CAAZ,CAAD,CADM,CAEN;AACD;;AACD,aAAOC,EAAP;AACD,KAVH,WAWS,UAAAK,CAAC;AAAA,aAAIJ,OAAO,CAACC,IAAR,CAAaG,CAAb,CAAJ;AAAA,KAXV,CADgC;AAAA,GAAP;AAAA,CAApB;AAcP,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAQC,OAAR,EAAiBC,GAAjB;AAAA,SAAyB,UAAAd,CAAC;AAAA,WACrDN,OAAO,CACJqB,IADH,CACQ,UADR,EACoB;AAAEH,MAAAA,KAAK,EAALA,KAAF;AAASC,MAAAA,OAAO,EAAPA,OAAT;AAAkBC,MAAAA,GAAG,EAAHA;AAAlB,KADpB,EAEGZ,IAFH,CAEQ,UAAAC,IAAI,EAAI;AAAA,UACJE,EADI,GACGF,IADH,CACJE,EADI;;AAEZ,UAAGA,EAAH,EAAO;AACL,eAAOA,EAAP;AACD;AACF,KAPH,CADqD;AAAA,GAA1B;AAAA,CAAtB,C,CAUP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import request from '../utils/request'\nimport _ from 'lodash'\nimport I from 'immutable'\nimport { articlesSet ,articlesSetIn } from '../redux/modules/articles'\n\n\nexport const getArticles = () => D =>\n  request\n    .get('articles')\n    .then(body => {\n      const { data, ok } = body\n      console.info(body)\n      if (ok) {\n        D(articlesSet(I.fromJS(_.keyBy(data || [], 'id'))))\n        //articles.map(v => v.set('key', v.get('id')))\n      }\n      return ok\n    })\n    .catch(e => console.info(e))\n\nexport const createArticle = (title, content, img) => D =>\n  request\n    .post('articles', { title, content, img })\n    .then(body => {\n      const { ok } = body\n      if(ok) {\n        return ok\n      }\n    })\n\n// export const deleteArticle = (id) => D =>\n//   request\n//     .delete(`articles/${id}`)\n//     .then(res => res.json())\n//     .then(body => {\n//       const { ok } = body\n//       console.info(body)\n//       if (ok) {\n//         return ok\n//       }\n//     })\n//     .catch(e => console.info(e,'Delete faild'))\n"]},"metadata":{},"sourceType":"module"}