{"ast":null,"code":"import request from '../utils/request';\nimport _ from 'lodash';\nimport I from 'immutable';\nimport { articlesSet, articlesSetIn } from '../redux/modules/articles';\nexport const getArticles = () => D => request.get('articles').then(body => {\n  const {\n    data,\n    ok\n  } = body;\n  console.info(body);\n\n  if (ok) {\n    D(articlesSet(I.fromJS(_.keyBy(data || [], 'id')))); //articles.map(v => v.set('key', v.get('id')))\n  }\n\n  return ok;\n}).catch(e => console.info(e));\nexport const createArticle = (title, content, img) => D => request.post('articles', {\n  title,\n  content,\n  img\n}).then(body => {\n  const {\n    ok\n  } = body;\n\n  if (ok) {\n    return ok;\n  }\n}); // export const deleteArticle = (id) => D =>\n//   request\n//     .delete(`articles/${id}`)\n//     .then(res => res.json())\n//     .then(body => {\n//       const { ok } = body\n//       console.info(body)\n//       if (ok) {\n//         return ok\n//       }\n//     })\n//     .catch(e => console.info(e,'Delete faild'))","map":{"version":3,"sources":["/Users/zhangxuecai/Projects/react-blog/http/article.js"],"names":["request","_","I","articlesSet","articlesSetIn","getArticles","D","get","then","body","data","ok","console","info","fromJS","keyBy","catch","e","createArticle","title","content","img","post"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,kBAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,CAAP,MAAc,WAAd;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,2BAA3C;AAGA,OAAO,MAAMC,WAAW,GAAG,MAAMC,CAAC,IAChCN,OAAO,CACJO,GADH,CACO,UADP,EAEGC,IAFH,CAEQC,IAAI,IAAI;AACZ,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAeF,IAArB;AACAG,EAAAA,OAAO,CAACC,IAAR,CAAaJ,IAAb;;AACA,MAAIE,EAAJ,EAAQ;AACNL,IAAAA,CAAC,CAACH,WAAW,CAACD,CAAC,CAACY,MAAF,CAASb,CAAC,CAACc,KAAF,CAAQL,IAAI,IAAI,EAAhB,EAAoB,IAApB,CAAT,CAAD,CAAZ,CAAD,CADM,CAEN;AACD;;AACD,SAAOC,EAAP;AACD,CAVH,EAWGK,KAXH,CAWSC,CAAC,IAAIL,OAAO,CAACC,IAAR,CAAaI,CAAb,CAXd,CADK;AAcP,OAAO,MAAMC,aAAa,GAAG,CAACC,KAAD,EAAQC,OAAR,EAAiBC,GAAjB,KAAyBf,CAAC,IACrDN,OAAO,CACJsB,IADH,CACQ,UADR,EACoB;AAAEH,EAAAA,KAAF;AAASC,EAAAA,OAAT;AAAkBC,EAAAA;AAAlB,CADpB,EAEGb,IAFH,CAEQC,IAAI,IAAI;AACZ,QAAM;AAAEE,IAAAA;AAAF,MAASF,IAAf;;AACA,MAAGE,EAAH,EAAO;AACL,WAAOA,EAAP;AACD;AACF,CAPH,CADK,C,CAUP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import request from '../utils/request'\nimport _ from 'lodash'\nimport I from 'immutable'\nimport { articlesSet ,articlesSetIn } from '../redux/modules/articles'\n\n\nexport const getArticles = () => D =>\n  request\n    .get('articles')\n    .then(body => {\n      const { data, ok } = body\n      console.info(body)\n      if (ok) {\n        D(articlesSet(I.fromJS(_.keyBy(data || [], 'id'))))\n        //articles.map(v => v.set('key', v.get('id')))\n      }\n      return ok\n    })\n    .catch(e => console.info(e))\n\nexport const createArticle = (title, content, img) => D =>\n  request\n    .post('articles', { title, content, img })\n    .then(body => {\n      const { ok } = body\n      if(ok) {\n        return ok\n      }\n    })\n\n// export const deleteArticle = (id) => D =>\n//   request\n//     .delete(`articles/${id}`)\n//     .then(res => res.json())\n//     .then(body => {\n//       const { ok } = body\n//       console.info(body)\n//       if (ok) {\n//         return ok\n//       }\n//     })\n//     .catch(e => console.info(e,'Delete faild'))\n"]},"metadata":{},"sourceType":"module"}